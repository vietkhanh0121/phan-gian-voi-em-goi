<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>Card Feel – P2P (Host Broadcast State)</title>
  <base href="./">
  <link rel="manifest" href="manifest.json">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Card Feel">
  <link rel="apple-touch-icon" href="assets/icons/icon-512.png">
  <link rel="stylesheet" href="styles.css">
<script>eruda.init();</script>
</head>
<body>

  <noscript>
    <div style="padding:12px; background:#260000; color:#fff; font-weight:700;">
      Trò chơi cần bật JavaScript để hoạt động.
    </div>
  </noscript>

  <!-- ===== Lobby ===== -->
  <section id="lobby" class="lobby">
    <div class="lobbyCard">
      <h1>Card Feel – Kết nối P2P</h1>
      <p id="lobbyStatus" class="muted">Đang khởi tạo…</p>
      <div class="lobbyBtns">
        <button id="btnCreate" class="primary">Tạo phòng</button>
        <button id="btnJoin" class="secondary">Vào phòng</button>
      </div>
<p class="muted small">PeerServer: <code>cardfeel-sio-relay.onrender.com</code>, path <code>/pg</code>.</p>
    </div>
  </section>

  <!-- ===== App ===== -->
  <main id="app" class="invisible" aria-live="polite">
    <header class="appHeader zone" role="banner">
      <span id="roomTag" class="tag">Phòng: --</span>
      <strong id="turnHint" class="turn turn--end">Host authoritative</strong>
      <span id="roleTag" class="tag">Vai: --</span>
    </header>

    <section class="zone">
      <div id="pile" class="pile" aria-label="Bài mở (Pile)"></div>
    </section>

    <section id="openZone" class="zone openZone" aria-label="Khu C (OpenZone)">
      <div class="ozGrid">
        <div class="ozTitle">Lá bài mở</div>
        <div id="ozOpen" class="ozSlot" aria-label="Lá bài mở chung"></div>
        <div id="ozHidden" class="ozSlot" aria-label="Lá bài bí ẩn"></div>
        <button id="btnReveal" class="ozReveal" aria-label="Mở lá bài bí ẩn">Mở lá bài bí ẩn</button>
      </div>
    </section>

    <section class="zone">
      <div id="stage" class="stage" aria-label="Trước mặt (Stage)"></div>
    </section>

    <section class="zone">
      <div id="hand" class="hand" aria-label="Tay bài (Hand)"></div>
    </section>

    <footer class="zone controls" role="contentinfo">
      <button id="btnPlay">Đánh</button>
      <button id="btnEnd">Kết thúc lượt</button>
      <button id="btnNew" class="warn">Ván mới</button>
    </footer>
  </main>

  <!-- Scripts (defer để không chặn render) -->
    <script src="https://unpkg.com/peerjs@1.5.4/dist/peerjs.min.js"></script>
  <script src="net.js" defer></script>
  <script src="marks.js" defer></script>
  <script src="animations.js" defer></script>
  <script src="app.js" defer></script>
</body>
</html>
